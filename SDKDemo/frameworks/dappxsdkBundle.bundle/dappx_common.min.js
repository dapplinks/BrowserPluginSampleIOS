if(!window.dappxCommon){let t;window.dappxCommon={},dappxCommon.log=function(t){console.log(t)},dappxCommon.makeString=function(t,n=0){let o=typeof t;if("string"==o)return"'"+t+"'";if("number"==o||"boolean"==o)return String(t);if("function"==o)return String(t).substring(0,100);if(n<10){if(t instanceof Array){let o="[",a="";for(let t=0;t<n;t++)a+="    ";let e=a+"    ";for(let a=0;a<t.length;a++){let r=t[a];o+=e+dappxCommon.makeString(r,n+1)+","}return o+=a+"]"}if("object"==o){let o="{",a="";for(let t=0;t<n;t++)a+="    ";let e=a+"    ";for(let a in t){let r=t[a];o+=e+a+": "+dappxCommon.makeString(r,n+1)+","}return o+=a+"}"}}return o},dappxCommon.dumpArgs=function(t){t&&dappxCommon.log(t);let n=arguments.callee.caller.arguments;for(let t in n){let o=n[t];dappxCommon.log(t+": "+dappxCommon.makeString(o))}},dappxCommon.platform="other",/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?dappxCommon.platform="iOS":/(Android)/i.test(navigator.userAgent)&&(dappxCommon.platform="android"),dappxCommon.requestUrl="http://game.dappx.com/api/account/requestStatistic",dappxCommon.callbackUrl="http://game.dappx.com/api/account/responseStatistic",dappxCommon.rewardUrl="http://www.dappx.com/api/info/gameDataStatistic",dappxCommon.uploadLog=function(n,o,a,e){let r=Object.assign({},a);r.function_name=o,r.callback_id=e,r.dappx_info=window.dappxInfo;let p={url:n,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({info:JSON.stringify(r)})};t("requestHttp",JSON.stringify(p),"0")};let n=new Map,o=function(t,o,a){let e=(new Date).getTime()+"-"+Math.floor(1e6*Math.random());return n.set(e,{name:t,params:o,callback:a}),e};dappxCommon.callFunction=function(n,a,e){let r=o(n,a,e);dappxCommon.uploadLog(dappxCommon.requestUrl,n,a,r),t(n,JSON.stringify(a),r)},"iOS"==dappxCommon.platform?t=function(t,n,o){window.webkit.messageHandlers.callFunction.postMessage({name:t,params:n,callbackId:o})}:"android"==dappxCommon.platform&&(t=function(t,n,o){dappxBridge.callFunction(t,n,o)});let a=function(t){let n=t.charCodeAt(0);return 48<=n&&n<=57?n-48:65<=n&&n<=90?n-65+10:97<=n&&n<=122?n-97+10:0},e=function(t){let n=[],o=0;for(;o<t.length;){let e=(a(t[o++])<<4)+a(t[o++]);if(e<128){n.push(e);continue}let r=e.toString(2),p=0;for(;"1"==r[p];)p++;let i=parseInt(r.substring(p),2);for(let n=1;n<p;n++)i=(i<<6)+(a(t[o++])<<4)+a(t[o++])-128;n.push(i)}return String.fromCharCode.apply(String,n)};dappxCommon.onCallback=function(t,o,a){let r=n.get(t);if(r){n.delete(t),"hex"==a&&(o=e(o));let p=JSON.parse(o);if(p.transaction_data&&delete p.transaction_data,dappxCommon.uploadLog(dappxCommon.callbackUrl,r.name,p,t),0==p.code){let n=!1;if("select"==r.name)n=!0;else if("auth"==r.name)n=!0;else if("transfer"==r.name)n=!0;else if("transaction"==r.name)try{let t=r.params.actions;for(let o=0;o<t.length;o++){let a=t[o];if("eosio.token"==a.account&&"transfer"==a.name){n=!0;break}}}catch(t){}n&&dappxCommon.uploadLog(dappxCommon.rewardUrl,r.name,p,t)}r.callback(JSON.parse(o))}},dappxCommon.proxy=function(t,n){return new Proxy(t,{get:function(t,o){let a=t[o],e=n[o];return n.hasOwnProperty(o)?e:a}})}}