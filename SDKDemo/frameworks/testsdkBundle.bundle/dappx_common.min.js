if(!window.dappxCommon){let o;window.dappxCommon={},dappxCommon.log=function(o){console.log(o)},dappxCommon.makeString=function(o,t=0){let n=typeof o;if("string"==n)return"'"+o+"'";if("number"==n||"boolean"==n)return String(o);if("function"==n)return String(o).substring(0,100);if(t<10){if(o instanceof Array){let n="[",a="";for(let o=0;o<t;o++)a+="    ";let e=a+"    ";for(let a=0;a<o.length;a++){let p=o[a];n+=e+dappxCommon.makeString(p,t+1)+","}return n+=a+"]"}if("object"==n){let n="{",a="";for(let o=0;o<t;o++)a+="    ";let e=a+"    ";for(let a in o){let p=o[a];n+=e+a+": "+dappxCommon.makeString(p,t+1)+","}return n+=a+"}"}}return n},dappxCommon.dumpArgs=function(o){o&&dappxCommon.log(o);let t=arguments.callee.caller.arguments;for(let o in t){let n=t[o];dappxCommon.log(o+": "+dappxCommon.makeString(n))}},dappxCommon.platform="other",/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?dappxCommon.platform="iOS":/(Android)/i.test(navigator.userAgent)&&(dappxCommon.platform="android"),dappxCommon.requestUrl="http://game.dappx.com/api/account/requestStatistic",dappxCommon.callbackUrl="http://game.dappx.com/api/account/responseStatistic",dappxCommon.rewardUrl="http://www.dappx.com/api/info/gameDataStatistic",dappxCommon.uploadLog=function(t,n,a,e){let p=Object.assign({},a);p.function_name=n,p.callback_id=e,p.dappx_info=window.dappxInfo;let r={url:t,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({info:JSON.stringify(p)})};o("requestHttp",JSON.stringify(r),"0")};let t=new Map,n=function(o,n,a){let e=(new Date).getTime()+"-"+Math.floor(1e6*Math.random());return t.set(e,{name:o,params:n,callback:a}),e};dappxCommon.callFunction=function(t,a,e){let p=n(t,a,e);dappxCommon.uploadLog(dappxCommon.requestUrl,t,a,p),o(t,JSON.stringify(a),p)},"iOS"==dappxCommon.platform?(o=function(o,t,n){window.webkit.messageHandlers.callFunction.postMessage({name:o,params:t,callbackId:n})},dappxCommon.log=function(o){window.webkit.messageHandlers.callLog.postMessage(o)}):"android"==dappxCommon.platform&&(o=function(o,t,n){dappxBridge.callFunction(o,t,n)});let a=function(o){let t=o.charCodeAt(0);return 48<=t&&t<=57?t-48:65<=t&&t<=90?t-65+10:97<=t&&t<=122?t-97+10:0},e=function(o){let t=[],n=0;for(;n<o.length;){let e=(a(o[n++])<<4)+a(o[n++]);if(e<128){t.push(e);continue}let p=e.toString(2),r=0;for(;"1"==p[r];)r++;let i=parseInt(p.substring(r),2);for(let t=1;t<r;t++)i=(i<<6)+(a(o[n++])<<4)+a(o[n++])-128;t.push(i)}return String.fromCharCode.apply(String,t)};dappxCommon.onCallback=function(o,n,a){dappxCommon.dumpArgs("onCallback");let p=t.get(o);if(p){t.delete(o),"hex"==a&&(n=e(n)),dappxCommon.dumpArgs("result "+n);let r=JSON.parse(n);if(r.transaction_data&&delete r.transaction_data,dappxCommon.uploadLog(dappxCommon.callbackUrl,p.name,r,o),0==r.code){let t=!1;if("select"==p.name)t=!0;else if("auth"==p.name)t=!0;else if("transfer"==p.name)t=!0;else if("transaction"==p.name)try{let o=p.params.actions;for(let n=0;n<o.length;n++){let a=o[n];if("eosio.token"==a.account&&"transfer"==a.name){t=!0;break}}}catch(o){}t&&dappxCommon.uploadLog(dappxCommon.rewardUrl,p.name,r,o)}p.callback(JSON.parse(n))}},dappxCommon.proxy=function(o,t){return new Proxy(o,{get:function(o,n){let a=o[n],e=t[n];return t.hasOwnProperty(n)?e:a}})}}